message client->server:

{
    "action": "set_name",
    "nickname": "$name"
}

{
    "action": "place_trap",
    "token": "$token",
    "position": [x, y],
    "trap": {
        "kind": "pitfall",
        "upgrades": []
    }
}

{
    "action": "place_spawner",
    "token": "$token",
    "position": [x, y],
    "kind": "$mobname"
    "spawner": {
        "pattern": "$patternname"
    }
}

{
    "action": "upgrade_building",
    "token": "$token",
    "building_id": m,
    "new_upgrades": []
}

{
    "action": "trigger_spawner",
    "token": "$token",
    "spawner_id": m
}

{
    "action": "quit",
    "token": "$token"
}

{
    "action": "start_game",
    "token": "$token",
    "game_name": "$game_name"
}

{
    "action": "join_game",
    "token": "$token",
    "game_name": "$game_name || empty"
}


message server->client:

{
    "action": "set_token",
    "token": "$token"
}

{
    "action": set_player_id",
    "player_id": n
}

{
    "action": "error",
    "message": "$errormessage",
    "can_continue": true/false,
    "error_code": n || -1
}

{
    "action": "full_game_state",
    "map": {
        size: [x, y],
        units: [ unit, unit, ... ],
        traps: [ trap, trap, ... ],
        buildings: [ building, building, ...]
    }
}

dataformats:

unit:
{
    "id": id,
    "player_id": n,
    "position": [x, y],
    "kind": kind,
    "upgrades": [ ],
    "life": life,
    "equipment": equipment,
    "wearout": wearout // abnutzung
}

trap:
{
    "id": id,
    "player_id": n,
    "position": [x, y],
    "upgrades": [ ],
    "kind": kind,
    "durability": durability,
    "invisible": invisible
}

building:
{
    "id": id,
    "player_id": n,
    "position": y,
    "kind": kind
}

... TBD
